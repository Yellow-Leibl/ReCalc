#!/bin/bash
a="./a.exe"
gcc *.c -O3 -o $a
in="in.txt"
out="out.txt"

$a -?
echo ""
echo "simple test"
echo ""
$a +2 2
$a -2 -2
$a 2+2 4
$a 2-2 0
$a 2*2 4
$a 2/2 1
echo ""
echo "complicated test (no brackets)"
echo ""
$a 2+2+2 6
$a 2-2+2 2
$a 2+2-2 2
$a 2-2-2 -2
$a 2*2*2 8
$a 2/2*2 2
$a 2*2/2 2
$a 2/2/2 0.5

$a 2+2*2 6
$a 2-2*2 -2

$a 2*2+2 6
$a 2*2-2 2

$a 2+2/2 3
$a 2-2/2 1

$a 2/2+2 3
$a 2/2-2 -1

$a 2/2+2*2 5
$a 2/2-2*2 -3

$a 2*2+2/2 5
$a 2*2-2/2 3
echo ""
echo "simple test (brackets)"
echo ""
$a "+(3)" 3
$a "-(3)" -3

$a "((((3))))" 3
$a "(-(+(3)))" -3

$a "5+(3+1)" 9
$a "5-(3+1)" 1
$a "5+(3-1)" 7
$a "5-(3-1)" 3

$a "3+(3/2)" 4.5
$a "3+(3*2)" 9
$a "3-(2*2)" -1
$a "3-(2/2)" 2

$a "(3+1)+5" 9
$a "(3+1)-5" -1
$a "(3-1)+5" 7
$a "(3-1)-5" -3

$a "3*(2+1)" 9
$a "3*(2-1)" 3
$a "3/(1+1)" 1.5
$a "3/(1-1)" inf

$a "(2+1)*3" 9
$a "(2-1)*3" 3
$a "(1+1)/3"
$a "(1-1)/3" 0
echo ""
echo "complicated test (brackets)"
echo ""
$a "(7+(0+1)+(+2)+3)" 13
$a "1-(7-(0-1)+(-2)+3)-2" -10
$a "-4*((2-3)+(-(+3))*2)/3" 9.3333333333333333
$a "-(3-(2/5)*4+4*(3-2)/2-(3/2+5*(4-2)))" 8.1